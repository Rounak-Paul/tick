clock sys = 50hz;

proc producer(chan<int> out) {
  on sys.tick {
    static i: int = 0;
    out.send(i);
    i = i + 1;
  }
}

proc filter(chan<int> in, chan<int> out) {
  on sys.tick {
    static pass_through: int = 0;
    if (pass_through == 0) {
      out.send(100);
    }
    pass_through = 1;
    if (pass_through > 0) {
      pass_through = 0;
    }
  }
}

proc consumer(chan<int> in) {
  on sys.tick {
    println(999);
  }
}
